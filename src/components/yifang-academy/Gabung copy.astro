---
// WhatsAppSection.astro
---

<section class="max-w-7xl mx-auto px-6 py-24 overflow-hidden">
  <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
    <div
      id="wa-card"
      class="lg:col-span-7 bg-white rounded-[2.5rem] p-8 md:p-14 shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-slate-50 relative z-10"
    >
      <div class="space-y-8">
        <h2
          class="text-2xl md:text-3xl font-black text-slate-800 leading-tight"
        >
          Gabung ke WA Channel Yifang Academy, <br />
          <span class="text-green-600">tempat kamu akan dapat:</span>
        </h2>

        <ul class="space-y-5">
          {
            [
              "Tips mindset & komunikasi yang dicari bos Tiongkok",
              "Cerita nyata alumni yang naik level",
              "Update info lowongan & karir eksklusif",
              "Semua langsung di WhatsApp kamu",
            ].map((item) => (
              <li class="wa-list-item flex items-start gap-4 group">
                <div class="flex-shrink-0 w-8 h-8 bg-green-50 rounded-full flex items-center justify-center group-hover:bg-green-500 group-hover:text-white transition-colors duration-300">
                  <svg
                    class="w-5 h-5 text-green-600 group-hover:text-white"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="3"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                </div>
                <span class="text-slate-600 font-semibold text-lg">{item}</span>
              </li>
            ))
          }
        </ul>

        <div class="pt-6">
          <a
            href="#"
            class="inline-flex items-center gap-3 bg-[#bd3228] text-white px-10 py-4 rounded-2xl font-bold text-lg hover:bg-slate-900 transition-all duration-300 shadow-lg shadow-red-200 hover:shadow-slate-300 active:scale-95"
          >
            <i class="fa-brands fa-whatsapp text-2xl"></i>
            Gabung Sekarang
          </a>
        </div>
      </div>
    </div>

    <div class="lg:col-span-5 relative">
      <div
        id="wa-image-container"
        class="relative rounded-[2rem] overflow-hidden shadow-2xl"
      >
        <img
          src="/path-to-your-image.jpg"
          alt="Yifang Academy WhatsApp"
          class="w-full h-full object-cover scale-110"
        />
        <div
          class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"
        >
        </div>
      </div>

      <div
        id="floating-tag"
        class="absolute -top-6 -right-6 bg-green-500 text-white px-6 py-3 rounded-2xl font-bold shadow-xl rotate-12"
      >
        Free Access âš¡
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  const initWASection = () => {
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: "#wa-card",
        start: "top 80%",
      },
    });

    // Animasi masuk Card
    tl.from("#wa-card", {
      x: -100,
      opacity: 0,
      duration: 1,
      ease: "power4.out",
    }).from(
      ".wa-list-item",
      {
        x: -20,
        opacity: 0,
        stagger: 0.15,
        duration: 0.5,
        ease: "power2.out",
      },
      "-=0.5"
    );

    // Animasi Gambar dengan efek Parallax sederhana
    gsap.from("#wa-image-container img", {
      scrollTrigger: {
        trigger: "#wa-image-container",
        scrub: true,
        start: "top bottom",
        end: "bottom top",
      },
      scale: 1.3,
      y: 50,
      ease: "none",
    });

    // Animasi Badge Melayang
    tl.from(
      "#floating-tag",
      {
        scale: 0,
        rotation: 0,
        duration: 0.6,
        ease: "back.out(2)",
      },
      "-=0.3"
    );
  };

  initWASection();
</script>
