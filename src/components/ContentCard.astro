---
const {
  subtitle,
  title,
  descriptions = [],
  listItems = [],
  imageUrl,
  alt,
  reverse = false,
} = Astro.props;
---

<section class="content-card-section w-full py-6 md:py-12 overflow-hidden">
  <div class="max-w-7xl mx-auto px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center">
      <!-- image -->
      <div
        class={`card-image relative ${reverse ? "lg:order-2" : "lg:order-1"}`}
      >
        <div
          class="absolute -inset-4 bg-primary/5 rounded-2xl -z-10 scale-95 md:scale-100"
        >
        </div>
        <img
          src={imageUrl}
          alt={alt}
          class="w-full h-auto rounded-xl shadow-2xl object-cover transform transition-transform duration-500 hover:scale-105"
        />
      </div>
      <!-- text -->
      <div class={`card-text ${reverse ? "lg:order-1" : "lg:order-2"}`}>
        <span
          class="inline-block text-primary font-bold tracking-[0.2em] text-xs md:text-sm uppercase mb-4 border-b-2 border-primary/20 pb-1"
        >
          {subtitle}
        </span>

        <h2
          class="text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 leading-tight mb-6"
        >
          {title}
        </h2>

        <div class="w-12 h-1 bg-primary mb-6"></div>
        {
          descriptions.map((description) => (
            <p class="text-gray-600 text-sm md:text-base leading-relaxed mb-8 italic">
              {description}
            </p>
          ))
        }
        {
          listItems.map((item) => (
            <ul class="ml-3 list-disc pl-5 space-y-2 text-gray-600 text-sm md:text-base">
              <li>{item}</li>
            </ul>
          ))
        }
      </div>
    </div>
  </div>
</section>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  // Animasi untuk setiap elemen card-text dan card-image
  const textElements = document.querySelectorAll(".card-text");
  const imageElements = document.querySelectorAll(".card-image");

  textElements.forEach((el) => {
    gsap.from(el, {
      scrollTrigger: {
        trigger: el,
        start: "top 85%",
      },
      x: 50,
      opacity: 0,
      duration: 1,
      ease: "power3.out",
    });
  });

  imageElements.forEach((el) => {
    gsap.from(el, {
      scrollTrigger: {
        trigger: el,
        start: "top 85%",
      },
      x: -50,
      opacity: 0,
      duration: 1.2,
      ease: "power2.out",
    });
  });
</script>
